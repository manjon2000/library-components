import { ChangeDetectionStrategy, Component, EventEmitter, HostListener, Input, Output, ViewChild, ViewEncapsulation } from '@angular/core';
import { FocusBlurDirective } from '../../shared/directives/focus-blur.directive';
import { CommonModule } from '@angular/common';
import { filter, Subject, takeUntil } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
// Añadir NGvalue_ACCESSOR y al componente UIOptionGroupComponent
export class UIInputSearchComponent {
    constructor(cdr) {
        this.cdr = cdr;
        this.isShowSuggestions = true;
        this.outputWriteInput = new EventEmitter();
        this.outputSuggestions = new EventEmitter();
        this.isFocusin = false;
        this.isShowPanel = false;
        this.value = '';
        this._unsubcribes$ = new Subject();
    }
    onResize() {
        if (this.container?.nativeElement &&
            this.panel?.nativeElement &&
            this.isShowSuggestions) {
            this.adjustPositionPanel(this.container.nativeElement, this.panel?.nativeElement);
        }
    }
    onDocumentClick(event) {
        if (!this.container?.nativeElement.contains(event.target)) {
            if (this.isShowSuggestions) {
                this.isShowPanel = false;
            }
            this.isFocusin = false;
            this.cdr.markForCheck();
        }
    }
    ngAfterViewInit() {
        if (this.panelSuggestions) {
            this.panelSuggestions.outputSelected
                .pipe(filter((value) => value !== undefined), 
            //distinctUntilChanged(),
            takeUntil(this._unsubcribes$))
                .subscribe((options) => {
                this.value = options?.value;
                this.isFocusin = false;
                this.isShowPanel = false;
                this.outputSuggestions.emit(options);
            });
        }
    }
    ngAfterContentInit() {
        if (this.container?.nativeElement &&
            this.panel?.nativeElement &&
            this.isShowSuggestions) {
            this.adjustPositionPanel(this.container.nativeElement, this.panel?.nativeElement);
        }
        this.cdr.markForCheck();
    }
    ngAfterViewChecked() {
        if (this.container?.nativeElement &&
            this.panel?.nativeElement &&
            this.isShowSuggestions) {
            this.adjustPositionPanel(this.container.nativeElement, this.panel?.nativeElement);
        }
    }
    ngOnDestroy() {
        this._unsubcribes$.next();
        this._unsubcribes$.complete();
    }
    onInput(event) {
        const { value } = (event.currentTarget);
        this.value = value;
        this.outputWriteInput.emit(this.value);
        this.cdr.markForCheck();
    }
    onFocus() {
        this.isFocusin = true;
    }
    onBlur() {
        this.isFocusin = false;
    }
    adjustPositionPanel(container, panel) {
        if (!container || !panel) {
            console.warn('Container or panel is not available');
            return;
        }
        const { width, top, left, height } = container.getBoundingClientRect();
        panel.style.position = 'fixed';
        panel.style.width = `${width}px`;
        panel.style.top = `${top + height}px`;
        panel.style.left = `${left}px`;
        this.cdr.markForCheck();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: UIInputSearchComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.12", type: UIInputSearchComponent, isStandalone: true, selector: "ui-input-search", inputs: { panelSuggestions: "panelSuggestions", placeholder: "placeholder", isShowSuggestions: "isShowSuggestions" }, outputs: { outputWriteInput: "outputWriteInput", outputSuggestions: "outputSuggestions" }, host: { listeners: { "window:resize": "onResize($event)", "document:click": "onDocumentClick($event)" } }, viewQueries: [{ propertyName: "container", first: true, predicate: ["container"], descendants: true, static: true }, { propertyName: "panel", first: true, predicate: ["panel"], descendants: true }], ngImport: i0, template: "<div \n    #container \n    class=\"ui-input-search\" \n    [class.ui-input-search--expand]=\"(isShowSuggestions && value.length !== 0) && (isShowPanel || isFocusin)\">\n    <input \n        #input \n        focusBlur\n        [value]=\"value\"\n        (input)=\"onInput($event)\"\n        (onFocus)=\"onFocus()\"\n        (onBlur)=\"onBlur()\" \n        type=\"search\"\n        placeholder=\"Buscar modelos\"\n    />\n    <div class=\"ui-input-search__wrapper\">\n        <svg class=\"ui-input-search-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M10.8424 17.684C12.3605 17.6837 13.8349 17.1755 15.0307 16.2403L18.7906 20L20 18.7907L16.2401 15.031C17.1758 13.8351 17.6844 12.3604 17.6847 10.842C17.6847 7.06949 14.6151 4 10.8424 4C7.06965 4 4 7.06949 4 10.842C4 14.6145 7.06965 17.684 10.8424 17.684ZM10.8424 5.7105C13.6725 5.7105 15.9741 8.01197 15.9741 10.842C15.9741 13.672 13.6725 15.9735 10.8424 15.9735C8.01219 15.9735 5.71059 13.672 5.71059 10.842C5.71059 8.01197 8.01219 5.7105 10.8424 5.7105Z\" fill=\"currentColor\"/>\n            <path d=\"M12.05 9.6327C12.3742 9.95769 12.5529 10.387 12.5529 10.842H14.2635C14.2643 10.3925 14.1759 9.94734 14.0036 9.53219C13.8312 9.11705 13.5783 8.74018 13.2594 8.42337C11.9645 7.13024 9.71935 7.13024 8.42529 8.42337L9.63297 9.63441C10.283 8.98613 11.4034 8.98784 12.05 9.6327Z\" fill=\"currentColor\"/>\n        </svg>\n    </div>\n    <ng-container *ngIf=\"isShowSuggestions\">\n        <div \n            #panel \n            class=\"ui-input-search__panel\" \n            [class.ui-input-search__panel--expand]=\"value.length !== 0 && (isShowPanel || isFocusin)\" \n            role=\"listbox\">\n            <ng-content></ng-content>\n        </div>\n    </ng-container>\n</div>  ", styles: ["@import\"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\";:root{--font-family: \"Poppins\", sans-serif;--font-size: 16px;--line-height: 1.5;--corporate-purple: #9D3FE7;--corporate-gradient: 159.13deg, #9D3FE7 -24.13%, #602093 132.21%;--grayscale-black: #1A141F;--grayscale-white: #FFFFFF;--grayscale-hint-text: #4B3A5A;--grayscale-border: #ABA7AF;--grayscale-disabled: #D4D2D5;--grayscale-spacer: #D9D1E0;--grayscale-spacer-light: #E5E0EB;--grayscale-bg-light-grey: #F5F3F7;--informing-error: #D51A52;--informing-attention: #FF9500;--informing-approval: #00B998;--informing-link: #0F0BAB}*,*:before,*:after{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}main{height:max-content}body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);min-height:100vh;vertical-align:middle}a{text-decoration:none}ul{padding:0;list-style:none}input[type=\"*\"]{outline:none;border:none;font-family:inherit;font-size:inherit}img{display:inline-block;max-width:100%}button{border:none;outline:none;background-color:transparent}@keyframes collapseAnimation{0%{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}99%{clip-path:polygon(0 0,100% 0,100% 0,0 0)}to{clip-path:polygon(0 0,100% 0,100% 0,0 0)}}@keyframes expandAnimation{0%{clip-path:polygon(0 0,100% 0,100% 0,0 0)}99%{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}to{clip-path:none}}.visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;left:0}.ui-input-search{height:2.75em;position:relative;display:flex;align-items:center;justify-content:space-between;gap:.5em;padding:0 .75em;border:.0625em solid var(--grayscale-spacer-light);border-radius:.125em}.ui-input-search--expand{border-bottom:none}.ui-input-search input{width:100%;height:100%;outline:none;border:none}.ui-input-search input:focus{outline:none}.ui-input-search__wrapper{height:100%;display:flex;align-items:center}.ui-input-search__panel{width:100%;height:fit-content;position:fixed;bottom:0;border:.0625em solid var(--grayscale-spacer-light);display:flex;flex-direction:column;animation:collapseAnimation ease-in-out .25s forwards}.ui-input-search__panel--expand{animation:expandAnimation ease-in-out .25s forwards}\n"], dependencies: [{ kind: "directive", type: FocusBlurDirective, selector: "[focusBlur]", outputs: ["onFocus", "onBlur"] }, { kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: UIInputSearchComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ui-input-search', standalone: true, imports: [
                        FocusBlurDirective,
                        CommonModule
                    ], encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, template: "<div \n    #container \n    class=\"ui-input-search\" \n    [class.ui-input-search--expand]=\"(isShowSuggestions && value.length !== 0) && (isShowPanel || isFocusin)\">\n    <input \n        #input \n        focusBlur\n        [value]=\"value\"\n        (input)=\"onInput($event)\"\n        (onFocus)=\"onFocus()\"\n        (onBlur)=\"onBlur()\" \n        type=\"search\"\n        placeholder=\"Buscar modelos\"\n    />\n    <div class=\"ui-input-search__wrapper\">\n        <svg class=\"ui-input-search-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M10.8424 17.684C12.3605 17.6837 13.8349 17.1755 15.0307 16.2403L18.7906 20L20 18.7907L16.2401 15.031C17.1758 13.8351 17.6844 12.3604 17.6847 10.842C17.6847 7.06949 14.6151 4 10.8424 4C7.06965 4 4 7.06949 4 10.842C4 14.6145 7.06965 17.684 10.8424 17.684ZM10.8424 5.7105C13.6725 5.7105 15.9741 8.01197 15.9741 10.842C15.9741 13.672 13.6725 15.9735 10.8424 15.9735C8.01219 15.9735 5.71059 13.672 5.71059 10.842C5.71059 8.01197 8.01219 5.7105 10.8424 5.7105Z\" fill=\"currentColor\"/>\n            <path d=\"M12.05 9.6327C12.3742 9.95769 12.5529 10.387 12.5529 10.842H14.2635C14.2643 10.3925 14.1759 9.94734 14.0036 9.53219C13.8312 9.11705 13.5783 8.74018 13.2594 8.42337C11.9645 7.13024 9.71935 7.13024 8.42529 8.42337L9.63297 9.63441C10.283 8.98613 11.4034 8.98784 12.05 9.6327Z\" fill=\"currentColor\"/>\n        </svg>\n    </div>\n    <ng-container *ngIf=\"isShowSuggestions\">\n        <div \n            #panel \n            class=\"ui-input-search__panel\" \n            [class.ui-input-search__panel--expand]=\"value.length !== 0 && (isShowPanel || isFocusin)\" \n            role=\"listbox\">\n            <ng-content></ng-content>\n        </div>\n    </ng-container>\n</div>  ", styles: ["@import\"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\";:root{--font-family: \"Poppins\", sans-serif;--font-size: 16px;--line-height: 1.5;--corporate-purple: #9D3FE7;--corporate-gradient: 159.13deg, #9D3FE7 -24.13%, #602093 132.21%;--grayscale-black: #1A141F;--grayscale-white: #FFFFFF;--grayscale-hint-text: #4B3A5A;--grayscale-border: #ABA7AF;--grayscale-disabled: #D4D2D5;--grayscale-spacer: #D9D1E0;--grayscale-spacer-light: #E5E0EB;--grayscale-bg-light-grey: #F5F3F7;--informing-error: #D51A52;--informing-attention: #FF9500;--informing-approval: #00B998;--informing-link: #0F0BAB}*,*:before,*:after{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}main{height:max-content}body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);min-height:100vh;vertical-align:middle}a{text-decoration:none}ul{padding:0;list-style:none}input[type=\"*\"]{outline:none;border:none;font-family:inherit;font-size:inherit}img{display:inline-block;max-width:100%}button{border:none;outline:none;background-color:transparent}@keyframes collapseAnimation{0%{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}99%{clip-path:polygon(0 0,100% 0,100% 0,0 0)}to{clip-path:polygon(0 0,100% 0,100% 0,0 0)}}@keyframes expandAnimation{0%{clip-path:polygon(0 0,100% 0,100% 0,0 0)}99%{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}to{clip-path:none}}.visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;left:0}.ui-input-search{height:2.75em;position:relative;display:flex;align-items:center;justify-content:space-between;gap:.5em;padding:0 .75em;border:.0625em solid var(--grayscale-spacer-light);border-radius:.125em}.ui-input-search--expand{border-bottom:none}.ui-input-search input{width:100%;height:100%;outline:none;border:none}.ui-input-search input:focus{outline:none}.ui-input-search__wrapper{height:100%;display:flex;align-items:center}.ui-input-search__panel{width:100%;height:fit-content;position:fixed;bottom:0;border:.0625em solid var(--grayscale-spacer-light);display:flex;flex-direction:column;animation:collapseAnimation ease-in-out .25s forwards}.ui-input-search__panel--expand{animation:expandAnimation ease-in-out .25s forwards}\n"] }]
        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }], propDecorators: { container: [{
                type: ViewChild,
                args: ['container', { static: true }]
            }], panel: [{
                type: ViewChild,
                args: ['panel', { static: false }]
            }], panelSuggestions: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], isShowSuggestions: [{
                type: Input
            }], outputWriteInput: [{
                type: Output
            }], outputSuggestions: [{
                type: Output
            }], onResize: [{
                type: HostListener,
                args: ['window:resize', ['$event']]
            }], onDocumentClick: [{
                type: HostListener,
                args: ['document:click', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtc2VhcmNoLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21hbmpvbi11aS9zcmMvbGliL2NvbXBvbmVudHMvaW5wdXQtc2VhcmNoL2lucHV0LXNlYXJjaC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9tYW5qb24tdWkvc3JjL2xpYi9jb21wb25lbnRzL2lucHV0LXNlYXJjaC9pbnB1dC1zZWFyY2guY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFxRCx1QkFBdUIsRUFBcUIsU0FBUyxFQUFlLFlBQVksRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFhLE1BQU0sRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMU8sT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sOENBQThDLENBQUM7QUFDbEYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRS9DLE9BQU8sRUFBd0IsTUFBTSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxNQUFNLENBQUM7OztBQUV4RSxpRUFBaUU7QUFjakUsTUFBTSxPQUFPLHNCQUFzQjtJQW1CakMsWUFDbUIsR0FBc0I7UUFBdEIsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFaaEMsc0JBQWlCLEdBQVksSUFBSSxDQUFDO1FBRWpDLHFCQUFnQixHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBQ3BFLHNCQUFpQixHQUFvRCxJQUFJLFlBQVksRUFBcUMsQ0FBQztRQUU5SCxjQUFTLEdBQVksS0FBSyxDQUFDO1FBQzNCLGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBQzdCLFVBQUssR0FBVyxFQUFFLENBQUM7UUFFbEIsa0JBQWEsR0FBa0IsSUFBSSxPQUFPLEVBQVEsQ0FBQztJQUl2RCxDQUFDO0lBSUwsUUFBUTtRQUNOLElBQ0UsSUFBSSxDQUFDLFNBQVMsRUFBRSxhQUFhO1lBQzdCLElBQUksQ0FBQyxLQUFLLEVBQUUsYUFBYTtZQUN6QixJQUFJLENBQUMsaUJBQWlCLEVBQ3RCLENBQUM7WUFDRCxJQUFJLENBQUMsbUJBQW1CLENBQ3RCLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUM1QixJQUFJLENBQUMsS0FBSyxFQUFFLGFBQWEsQ0FDMUIsQ0FBQztRQUNKLENBQUM7SUFDSCxDQUFDO0lBR0QsZUFBZSxDQUFDLEtBQWlCO1FBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDMUQsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztnQkFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7WUFDM0IsQ0FBQztZQUVELElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDMUIsQ0FBQztJQUNILENBQUM7SUFFRCxlQUFlO1FBQ2IsSUFBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUN6QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYztpQkFDbkMsSUFBSSxDQUNILE1BQU0sQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQztZQUN0Qyx5QkFBeUI7WUFDekIsU0FBUyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FDOUI7aUJBQ0EsU0FBUyxDQUFDLENBQUMsT0FBMEMsRUFBRSxFQUFFO2dCQUN4RCxJQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sRUFBRSxLQUFLLENBQUM7Z0JBQzVCLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO2dCQUN2QixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztnQkFDekIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN2QyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7SUFDSCxDQUFDO0lBRUQsa0JBQWtCO1FBQ2hCLElBQ0UsSUFBSSxDQUFDLFNBQVMsRUFBRSxhQUFhO1lBQzdCLElBQUksQ0FBQyxLQUFLLEVBQUUsYUFBYTtZQUN6QixJQUFJLENBQUMsaUJBQWlCLEVBQ3RCLENBQUM7WUFDRCxJQUFJLENBQUMsbUJBQW1CLENBQ3RCLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUM1QixJQUFJLENBQUMsS0FBSyxFQUFFLGFBQWEsQ0FDMUIsQ0FBQztRQUNKLENBQUM7UUFDRCxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxrQkFBa0I7UUFDaEIsSUFDRSxJQUFJLENBQUMsU0FBUyxFQUFFLGFBQWE7WUFDN0IsSUFBSSxDQUFDLEtBQUssRUFBRSxhQUFhO1lBQ3pCLElBQUksQ0FBQyxpQkFBaUIsRUFDdEIsQ0FBQztZQUNELElBQUksQ0FBQyxtQkFBbUIsQ0FDdEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQzVCLElBQUksQ0FBQyxLQUFLLEVBQUUsYUFBYSxDQUMxQixDQUFDO1FBQ0osQ0FBQztJQUNILENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFFTSxPQUFPLENBQUMsS0FBWTtRQUN6QixNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFxQixDQUFDO1FBRTVELElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRXZDLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUM7SUFFMUIsQ0FBQztJQUVNLE9BQU87UUFDWixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztJQUN4QixDQUFDO0lBRU0sTUFBTTtRQUNYLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO0lBQ3pCLENBQUM7SUFFTyxtQkFBbUIsQ0FBQyxTQUFzQixFQUFFLEtBQWtCO1FBQ3BFLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUN6QixPQUFPLENBQUMsSUFBSSxDQUFDLHFDQUFxQyxDQUFDLENBQUM7WUFDcEQsT0FBTztRQUNULENBQUM7UUFFRCxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFFdkUsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO1FBQy9CLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsS0FBSyxJQUFJLENBQUM7UUFDakMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsTUFBTSxJQUFJLENBQUM7UUFDdEMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsR0FBRyxJQUFJLElBQUksQ0FBQztRQUUvQixJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzFCLENBQUM7K0dBbklVLHNCQUFzQjttR0FBdEIsc0JBQXNCLDhrQkNwQm5DLDZ4REE2QlEsbTZFRGpCSixrQkFBa0IsdUZBQ2xCLFlBQVk7OzRGQU9ILHNCQUFzQjtrQkFabEMsU0FBUzsrQkFDRSxpQkFBaUIsY0FDZixJQUFJLFdBQ1A7d0JBQ1Asa0JBQWtCO3dCQUNsQixZQUFZO3FCQUNiLGlCQUdjLGlCQUFpQixDQUFDLElBQUksbUJBQ3BCLHVCQUF1QixDQUFDLE1BQU07c0ZBSUwsU0FBUztzQkFBbEQsU0FBUzt1QkFBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUNELEtBQUs7c0JBQTNDLFNBQVM7dUJBQUMsT0FBTyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtnQkFFNUIsZ0JBQWdCO3NCQUF4QixLQUFLO2dCQUVHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csaUJBQWlCO3NCQUF6QixLQUFLO2dCQUVJLGdCQUFnQjtzQkFBekIsTUFBTTtnQkFDRyxpQkFBaUI7c0JBQTFCLE1BQU07Z0JBY1AsUUFBUTtzQkFEUCxZQUFZO3VCQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsQ0FBQztnQkFlekMsZUFBZTtzQkFEZCxZQUFZO3VCQUFDLGdCQUFnQixFQUFFLENBQUMsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQgLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RMaXN0ZW5lciwgSW5wdXQsIE9uRGVzdHJveSwgT3V0cHV0LCBWaWV3Q2hpbGQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb2N1c0JsdXJEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9zaGFyZWQvZGlyZWN0aXZlcy9mb2N1cy1ibHVyLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSVVJT3B0aW9uR3JvdXBPcHRpb25Db25maWd1cmF0aW9uLCBVSU9wdGlvbkdyb3VwQ29tcG9uZW50IH0gZnJvbSAnLi4vb3B0aW9uLWdyb3VwL29wdGlvbi1ncm91cC5jb21wb25lbnQnO1xuaW1wb3J0IHsgZGlzdGluY3RVbnRpbENoYW5nZWQsIGZpbHRlciwgU3ViamVjdCwgdGFrZVVudGlsIH0gZnJvbSAncnhqcyc7XG5cbi8vIEHDsWFkaXIgTkd2YWx1ZV9BQ0NFU1NPUiB5IGFsIGNvbXBvbmVudGUgVUlPcHRpb25Hcm91cENvbXBvbmVudFxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd1aS1pbnB1dC1zZWFyY2gnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgRm9jdXNCbHVyRGlyZWN0aXZlLFxuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICB0ZW1wbGF0ZVVybDogJy4vaW5wdXQtc2VhcmNoLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmw6ICcuL2lucHV0LXNlYXJjaC5jb21wb25lbnQuc2NzcycsXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBVSUlucHV0U2VhcmNoQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcblxuICBAVmlld0NoaWxkKCdjb250YWluZXInLCB7IHN0YXRpYzogdHJ1ZSB9KSBjb250YWluZXIhOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdwYW5lbCcsIHsgc3RhdGljOiBmYWxzZSB9KSBwYW5lbCE6IEVsZW1lbnRSZWY7XG5cbiAgQElucHV0KCkgcGFuZWxTdWdnZXN0aW9ucyE6IFVJT3B0aW9uR3JvdXBDb21wb25lbnQgfCBudWxsO1xuXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyITogc3RyaW5nO1xuICBASW5wdXQoKSBpc1Nob3dTdWdnZXN0aW9uczogYm9vbGVhbiA9IHRydWU7XG5cbiAgQE91dHB1dCgpIG91dHB1dFdyaXRlSW5wdXQ6IEV2ZW50RW1pdHRlcjxzdHJpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIEBPdXRwdXQoKSBvdXRwdXRTdWdnZXN0aW9uczogRXZlbnRFbWl0dGVyPElVSU9wdGlvbkdyb3VwT3B0aW9uQ29uZmlndXJhdGlvbj4gPSBuZXcgRXZlbnRFbWl0dGVyPElVSU9wdGlvbkdyb3VwT3B0aW9uQ29uZmlndXJhdGlvbj4oKTtcblxuICBwdWJsaWMgaXNGb2N1c2luOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBpc1Nob3dQYW5lbDogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgdmFsdWU6IHN0cmluZyA9ICcnO1xuXG4gIHByaXZhdGUgX3Vuc3ViY3JpYmVzJDogU3ViamVjdDx2b2lkPiA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBjZHI6IENoYW5nZURldGVjdG9yUmVmXG4gICkgeyB9XG5cblxuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcbiAgb25SZXNpemUoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jb250YWluZXI/Lm5hdGl2ZUVsZW1lbnQgJiZcbiAgICAgIHRoaXMucGFuZWw/Lm5hdGl2ZUVsZW1lbnQgJiZcbiAgICAgIHRoaXMuaXNTaG93U3VnZ2VzdGlvbnNcbiAgICApIHtcbiAgICAgIHRoaXMuYWRqdXN0UG9zaXRpb25QYW5lbChcbiAgICAgICAgdGhpcy5jb250YWluZXIubmF0aXZlRWxlbWVudCxcbiAgICAgICAgdGhpcy5wYW5lbD8ubmF0aXZlRWxlbWVudFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDpjbGljaycsIFsnJGV2ZW50J10pXG4gIG9uRG9jdW1lbnRDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb250YWluZXI/Lm5hdGl2ZUVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgaWYgKHRoaXMuaXNTaG93U3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgdGhpcy5pc1Nob3dQYW5lbCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmlzRm9jdXNpbiA9IGZhbHNlO1xuICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIGlmKHRoaXMucGFuZWxTdWdnZXN0aW9ucykge1xuICAgICAgdGhpcy5wYW5lbFN1Z2dlc3Rpb25zLm91dHB1dFNlbGVjdGVkXG4gICAgICAucGlwZShcbiAgICAgICAgZmlsdGVyKCh2YWx1ZSkgPT4gdmFsdWUgIT09IHVuZGVmaW5lZCksXG4gICAgICAgIC8vZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuX3Vuc3ViY3JpYmVzJClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKG9wdGlvbnM6IElVSU9wdGlvbkdyb3VwT3B0aW9uQ29uZmlndXJhdGlvbikgPT4ge1xuICAgICAgICB0aGlzLnZhbHVlID0gb3B0aW9ucz8udmFsdWU7XG4gICAgICAgIHRoaXMuaXNGb2N1c2luID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTaG93UGFuZWwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vdXRwdXRTdWdnZXN0aW9ucy5lbWl0KG9wdGlvbnMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29udGFpbmVyPy5uYXRpdmVFbGVtZW50ICYmXG4gICAgICB0aGlzLnBhbmVsPy5uYXRpdmVFbGVtZW50ICYmXG4gICAgICB0aGlzLmlzU2hvd1N1Z2dlc3Rpb25zXG4gICAgKSB7XG4gICAgICB0aGlzLmFkanVzdFBvc2l0aW9uUGFuZWwoXG4gICAgICAgIHRoaXMuY29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgIHRoaXMucGFuZWw/Lm5hdGl2ZUVsZW1lbnRcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29udGFpbmVyPy5uYXRpdmVFbGVtZW50ICYmXG4gICAgICB0aGlzLnBhbmVsPy5uYXRpdmVFbGVtZW50ICYmXG4gICAgICB0aGlzLmlzU2hvd1N1Z2dlc3Rpb25zXG4gICAgKSB7XG4gICAgICB0aGlzLmFkanVzdFBvc2l0aW9uUGFuZWwoXG4gICAgICAgIHRoaXMuY29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgIHRoaXMucGFuZWw/Lm5hdGl2ZUVsZW1lbnRcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5fdW5zdWJjcmliZXMkLm5leHQoKTtcbiAgICB0aGlzLl91bnN1YmNyaWJlcyQuY29tcGxldGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbklucHV0KGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IHsgdmFsdWUgfSA9IChldmVudC5jdXJyZW50VGFyZ2V0KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMub3V0cHV0V3JpdGVJbnB1dC5lbWl0KHRoaXMudmFsdWUpO1xuXG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG5cbiAgfVxuXG4gIHB1YmxpYyBvbkZvY3VzKCkge1xuICAgIHRoaXMuaXNGb2N1c2luID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIoKSB7XG4gICAgdGhpcy5pc0ZvY3VzaW4gPSBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgYWRqdXN0UG9zaXRpb25QYW5lbChjb250YWluZXI6IEhUTUxFbGVtZW50LCBwYW5lbDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIWNvbnRhaW5lciB8fCAhcGFuZWwpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ29udGFpbmVyIG9yIHBhbmVsIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IHdpZHRoLCB0b3AsIGxlZnQsIGhlaWdodCB9ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgcGFuZWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgIHBhbmVsLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICAgIHBhbmVsLnN0eWxlLnRvcCA9IGAke3RvcCArIGhlaWdodH1weGA7XG4gICAgcGFuZWwuc3R5bGUubGVmdCA9IGAke2xlZnR9cHhgO1xuXG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gIH1cblxufVxuIiwiPGRpdiBcbiAgICAjY29udGFpbmVyIFxuICAgIGNsYXNzPVwidWktaW5wdXQtc2VhcmNoXCIgXG4gICAgW2NsYXNzLnVpLWlucHV0LXNlYXJjaC0tZXhwYW5kXT1cIihpc1Nob3dTdWdnZXN0aW9ucyAmJiB2YWx1ZS5sZW5ndGggIT09IDApICYmIChpc1Nob3dQYW5lbCB8fCBpc0ZvY3VzaW4pXCI+XG4gICAgPGlucHV0IFxuICAgICAgICAjaW5wdXQgXG4gICAgICAgIGZvY3VzQmx1clxuICAgICAgICBbdmFsdWVdPVwidmFsdWVcIlxuICAgICAgICAoaW5wdXQpPVwib25JbnB1dCgkZXZlbnQpXCJcbiAgICAgICAgKG9uRm9jdXMpPVwib25Gb2N1cygpXCJcbiAgICAgICAgKG9uQmx1cik9XCJvbkJsdXIoKVwiIFxuICAgICAgICB0eXBlPVwic2VhcmNoXCJcbiAgICAgICAgcGxhY2Vob2xkZXI9XCJCdXNjYXIgbW9kZWxvc1wiXG4gICAgLz5cbiAgICA8ZGl2IGNsYXNzPVwidWktaW5wdXQtc2VhcmNoX193cmFwcGVyXCI+XG4gICAgICAgIDxzdmcgY2xhc3M9XCJ1aS1pbnB1dC1zZWFyY2gtaWNvblwiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAuODQyNCAxNy42ODRDMTIuMzYwNSAxNy42ODM3IDEzLjgzNDkgMTcuMTc1NSAxNS4wMzA3IDE2LjI0MDNMMTguNzkwNiAyMEwyMCAxOC43OTA3TDE2LjI0MDEgMTUuMDMxQzE3LjE3NTggMTMuODM1MSAxNy42ODQ0IDEyLjM2MDQgMTcuNjg0NyAxMC44NDJDMTcuNjg0NyA3LjA2OTQ5IDE0LjYxNTEgNCAxMC44NDI0IDRDNy4wNjk2NSA0IDQgNy4wNjk0OSA0IDEwLjg0MkM0IDE0LjYxNDUgNy4wNjk2NSAxNy42ODQgMTAuODQyNCAxNy42ODRaTTEwLjg0MjQgNS43MTA1QzEzLjY3MjUgNS43MTA1IDE1Ljk3NDEgOC4wMTE5NyAxNS45NzQxIDEwLjg0MkMxNS45NzQxIDEzLjY3MiAxMy42NzI1IDE1Ljk3MzUgMTAuODQyNCAxNS45NzM1QzguMDEyMTkgMTUuOTczNSA1LjcxMDU5IDEzLjY3MiA1LjcxMDU5IDEwLjg0MkM1LjcxMDU5IDguMDExOTcgOC4wMTIxOSA1LjcxMDUgMTAuODQyNCA1LjcxMDVaXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiLz5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTIuMDUgOS42MzI3QzEyLjM3NDIgOS45NTc2OSAxMi41NTI5IDEwLjM4NyAxMi41NTI5IDEwLjg0MkgxNC4yNjM1QzE0LjI2NDMgMTAuMzkyNSAxNC4xNzU5IDkuOTQ3MzQgMTQuMDAzNiA5LjUzMjE5QzEzLjgzMTIgOS4xMTcwNSAxMy41NzgzIDguNzQwMTggMTMuMjU5NCA4LjQyMzM3QzExLjk2NDUgNy4xMzAyNCA5LjcxOTM1IDcuMTMwMjQgOC40MjUyOSA4LjQyMzM3TDkuNjMyOTcgOS42MzQ0MUMxMC4yODMgOC45ODYxMyAxMS40MDM0IDguOTg3ODQgMTIuMDUgOS42MzI3WlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIi8+XG4gICAgICAgIDwvc3ZnPlxuICAgIDwvZGl2PlxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc1Nob3dTdWdnZXN0aW9uc1wiPlxuICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgI3BhbmVsIFxuICAgICAgICAgICAgY2xhc3M9XCJ1aS1pbnB1dC1zZWFyY2hfX3BhbmVsXCIgXG4gICAgICAgICAgICBbY2xhc3MudWktaW5wdXQtc2VhcmNoX19wYW5lbC0tZXhwYW5kXT1cInZhbHVlLmxlbmd0aCAhPT0gMCAmJiAoaXNTaG93UGFuZWwgfHwgaXNGb2N1c2luKVwiIFxuICAgICAgICAgICAgcm9sZT1cImxpc3Rib3hcIj5cbiAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG48L2Rpdj4gICJdfQ==