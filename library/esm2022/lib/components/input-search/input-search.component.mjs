import { ChangeDetectionStrategy, Component, EventEmitter, HostListener, Input, Output, ViewChild, ViewEncapsulation } from '@angular/core';
import { FocusBlurDirective } from '../../shared/directives/focus-blur.directive';
import { CommonModule } from '@angular/common';
import { filter, Subject, takeUntil } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
// Añadir NGvalue_ACCESSOR y al componente UIOptionGroupComponent
export class UIInputSearchComponent {
    constructor(cdr) {
        this.cdr = cdr;
        this.isShowSuggestions = true;
        this.outputWriteInput = new EventEmitter();
        this.outputSuggestions = new EventEmitter();
        this.isFocusin = false;
        this.isShowPanel = false;
        this.value = '';
        this._unsubcribes$ = new Subject();
    }
    onResize() {
        if (this.container?.nativeElement &&
            this.panel?.nativeElement &&
            this.isShowSuggestions) {
            this.adjustPositionPanel(this.container.nativeElement, this.panel?.nativeElement);
        }
    }
    onDocumentClick(event) {
        if (!this.container?.nativeElement.contains(event.target)) {
            if (this.isShowSuggestions) {
                this.isShowPanel = false;
            }
            this.isFocusin = false;
            this.cdr.markForCheck();
        }
    }
    ngAfterViewInit() {
        if (this.panelSuggestions) {
            this.panelSuggestions.outputSelected
                .pipe(filter((value) => value !== undefined), 
            //distinctUntilChanged(),
            takeUntil(this._unsubcribes$))
                .subscribe((options) => {
                this.value = options?.value;
                this.isFocusin = false;
                this.isShowPanel = false;
                this.outputSuggestions.emit(options);
            });
        }
    }
    ngAfterContentInit() {
        if (this.container?.nativeElement &&
            this.panel?.nativeElement &&
            this.isShowSuggestions) {
            this.adjustPositionPanel(this.container.nativeElement, this.panel?.nativeElement);
        }
        this.cdr.markForCheck();
    }
    ngAfterViewChecked() {
        if (this.container?.nativeElement &&
            this.panel?.nativeElement &&
            this.isShowSuggestions) {
            this.adjustPositionPanel(this.container.nativeElement, this.panel?.nativeElement);
        }
    }
    ngOnDestroy() {
        this._unsubcribes$.next();
        this._unsubcribes$.complete();
    }
    onInput(event) {
        const { value } = (event.currentTarget);
        this.value = value;
        this.outputWriteInput.emit(this.value);
        this.cdr.markForCheck();
    }
    onFocus() {
        this.isFocusin = true;
    }
    onBlur() {
        this.isFocusin = false;
    }
    adjustPositionPanel(container, panel) {
        if (!container || !panel) {
            console.warn('Container or panel is not available');
            return;
        }
        const { width, top, left, height } = container.getBoundingClientRect();
        panel.style.position = 'fixed';
        panel.style.width = `${width}px`;
        panel.style.top = `${top + height}px`;
        panel.style.left = `${left}px`;
        this.cdr.markForCheck();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: UIInputSearchComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.12", type: UIInputSearchComponent, isStandalone: true, selector: "ui-input-search", inputs: { panelSuggestions: "panelSuggestions", placeholder: "placeholder", isShowSuggestions: "isShowSuggestions" }, outputs: { outputWriteInput: "outputWriteInput", outputSuggestions: "outputSuggestions" }, host: { listeners: { "window:resize": "onResize($event)", "document:click": "onDocumentClick($event)" } }, viewQueries: [{ propertyName: "container", first: true, predicate: ["container"], descendants: true, static: true }, { propertyName: "panel", first: true, predicate: ["panel"], descendants: true }], ngImport: i0, template: "<div \n    #container \n    class=\"ui-input-search\" \n    [class.ui-input-search--expand]=\"(isShowSuggestions && value.length !== 0) && (isShowPanel || isFocusin)\">\n    <input \n        #input \n        focusBlur\n        [value]=\"value\"\n        (input)=\"onInput($event)\"\n        (onFocus)=\"onFocus()\"\n        (onBlur)=\"onBlur()\" \n        type=\"search\"\n        placeholder=\"Buscar modelos\"\n    />\n    <div class=\"ui-input-search__wrapper\">\n        <svg class=\"ui-input-search-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M10.8424 17.684C12.3605 17.6837 13.8349 17.1755 15.0307 16.2403L18.7906 20L20 18.7907L16.2401 15.031C17.1758 13.8351 17.6844 12.3604 17.6847 10.842C17.6847 7.06949 14.6151 4 10.8424 4C7.06965 4 4 7.06949 4 10.842C4 14.6145 7.06965 17.684 10.8424 17.684ZM10.8424 5.7105C13.6725 5.7105 15.9741 8.01197 15.9741 10.842C15.9741 13.672 13.6725 15.9735 10.8424 15.9735C8.01219 15.9735 5.71059 13.672 5.71059 10.842C5.71059 8.01197 8.01219 5.7105 10.8424 5.7105Z\" fill=\"currentColor\"/>\n            <path d=\"M12.05 9.6327C12.3742 9.95769 12.5529 10.387 12.5529 10.842H14.2635C14.2643 10.3925 14.1759 9.94734 14.0036 9.53219C13.8312 9.11705 13.5783 8.74018 13.2594 8.42337C11.9645 7.13024 9.71935 7.13024 8.42529 8.42337L9.63297 9.63441C10.283 8.98613 11.4034 8.98784 12.05 9.6327Z\" fill=\"currentColor\"/>\n        </svg>\n    </div>\n    <ng-container *ngIf=\"isShowSuggestions\">\n        <div \n            #panel \n            class=\"ui-input-search__panel\" \n            [class.ui-input-search__panel--expand]=\"value.length !== 0 && (isShowPanel || isFocusin)\" \n            role=\"listbox\">\n            <ng-content></ng-content>\n        </div>\n    </ng-container>\n</div>  ", styles: ["@import\"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\";:root{--font-family: \"Poppins\", sans-serif;--font-size: 16px;--line-height: 1.5;--corporate-purple: #9D3FE7;--corporate-gradient: 159.13deg, #9D3FE7 -24.13%, #602093 132.21%;--grayscale-black: #1A141F;--grayscale-white: #FFFFFF;--grayscale-hint-text: #4B3A5A;--grayscale-border: #ABA7AF;--grayscale-disabled: #D4D2D5;--grayscale-spacer: #D9D1E0;--grayscale-spacer-light: #E5E0EB;--grayscale-bg-light-grey: #F5F3F7;--informing-error: #D51A52;--informing-attention: #FF9500;--informing-approval: #00B998;--informing-link: #0F0BAB}*,*:before,*:after{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}main{height:max-content}body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);min-height:100vh;vertical-align:middle}a{text-decoration:none}ul{padding:0;list-style:none}input[type=\"*\"]{outline:none;border:none;font-family:inherit;font-size:inherit}img{display:inline-block;max-width:100%}button{border:none;outline:none;background-color:transparent}@keyframes collapseAnimation{0%{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}99%{clip-path:polygon(0 0,100% 0,100% 0,0 0)}to{clip-path:polygon(0 0,100% 0,100% 0,0 0)}}@keyframes expandAnimation{0%{clip-path:polygon(0 0,100% 0,100% 0,0 0)}99%{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}to{clip-path:none}}.ui-input-search{height:2.75em;position:relative;display:flex;align-items:center;justify-content:space-between;gap:.5em;padding:0 .75em;border:.0625em solid var(--grayscale-spacer-light);border-radius:.125em}.ui-input-search--expand{border-bottom:none}.ui-input-search input{width:100%;height:100%;outline:none;border:none}.ui-input-search input:focus{outline:none}.ui-input-search__wrapper{height:100%;display:flex;align-items:center}.ui-input-search__panel{width:100%;height:fit-content;position:fixed;bottom:0;border:.0625em solid var(--grayscale-spacer-light);display:flex;flex-direction:column;animation:collapseAnimation ease-in-out .25s forwards}.ui-input-search__panel--expand{animation:expandAnimation ease-in-out .25s forwards}\n"], dependencies: [{ kind: "directive", type: FocusBlurDirective, selector: "[focusBlur]", outputs: ["onFocus", "onBlur"] }, { kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: UIInputSearchComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ui-input-search', standalone: true, imports: [
                        FocusBlurDirective,
                        CommonModule
                    ], encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, template: "<div \n    #container \n    class=\"ui-input-search\" \n    [class.ui-input-search--expand]=\"(isShowSuggestions && value.length !== 0) && (isShowPanel || isFocusin)\">\n    <input \n        #input \n        focusBlur\n        [value]=\"value\"\n        (input)=\"onInput($event)\"\n        (onFocus)=\"onFocus()\"\n        (onBlur)=\"onBlur()\" \n        type=\"search\"\n        placeholder=\"Buscar modelos\"\n    />\n    <div class=\"ui-input-search__wrapper\">\n        <svg class=\"ui-input-search-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M10.8424 17.684C12.3605 17.6837 13.8349 17.1755 15.0307 16.2403L18.7906 20L20 18.7907L16.2401 15.031C17.1758 13.8351 17.6844 12.3604 17.6847 10.842C17.6847 7.06949 14.6151 4 10.8424 4C7.06965 4 4 7.06949 4 10.842C4 14.6145 7.06965 17.684 10.8424 17.684ZM10.8424 5.7105C13.6725 5.7105 15.9741 8.01197 15.9741 10.842C15.9741 13.672 13.6725 15.9735 10.8424 15.9735C8.01219 15.9735 5.71059 13.672 5.71059 10.842C5.71059 8.01197 8.01219 5.7105 10.8424 5.7105Z\" fill=\"currentColor\"/>\n            <path d=\"M12.05 9.6327C12.3742 9.95769 12.5529 10.387 12.5529 10.842H14.2635C14.2643 10.3925 14.1759 9.94734 14.0036 9.53219C13.8312 9.11705 13.5783 8.74018 13.2594 8.42337C11.9645 7.13024 9.71935 7.13024 8.42529 8.42337L9.63297 9.63441C10.283 8.98613 11.4034 8.98784 12.05 9.6327Z\" fill=\"currentColor\"/>\n        </svg>\n    </div>\n    <ng-container *ngIf=\"isShowSuggestions\">\n        <div \n            #panel \n            class=\"ui-input-search__panel\" \n            [class.ui-input-search__panel--expand]=\"value.length !== 0 && (isShowPanel || isFocusin)\" \n            role=\"listbox\">\n            <ng-content></ng-content>\n        </div>\n    </ng-container>\n</div>  ", styles: ["@import\"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\";:root{--font-family: \"Poppins\", sans-serif;--font-size: 16px;--line-height: 1.5;--corporate-purple: #9D3FE7;--corporate-gradient: 159.13deg, #9D3FE7 -24.13%, #602093 132.21%;--grayscale-black: #1A141F;--grayscale-white: #FFFFFF;--grayscale-hint-text: #4B3A5A;--grayscale-border: #ABA7AF;--grayscale-disabled: #D4D2D5;--grayscale-spacer: #D9D1E0;--grayscale-spacer-light: #E5E0EB;--grayscale-bg-light-grey: #F5F3F7;--informing-error: #D51A52;--informing-attention: #FF9500;--informing-approval: #00B998;--informing-link: #0F0BAB}*,*:before,*:after{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}main{height:max-content}body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);min-height:100vh;vertical-align:middle}a{text-decoration:none}ul{padding:0;list-style:none}input[type=\"*\"]{outline:none;border:none;font-family:inherit;font-size:inherit}img{display:inline-block;max-width:100%}button{border:none;outline:none;background-color:transparent}@keyframes collapseAnimation{0%{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}99%{clip-path:polygon(0 0,100% 0,100% 0,0 0)}to{clip-path:polygon(0 0,100% 0,100% 0,0 0)}}@keyframes expandAnimation{0%{clip-path:polygon(0 0,100% 0,100% 0,0 0)}99%{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}to{clip-path:none}}.ui-input-search{height:2.75em;position:relative;display:flex;align-items:center;justify-content:space-between;gap:.5em;padding:0 .75em;border:.0625em solid var(--grayscale-spacer-light);border-radius:.125em}.ui-input-search--expand{border-bottom:none}.ui-input-search input{width:100%;height:100%;outline:none;border:none}.ui-input-search input:focus{outline:none}.ui-input-search__wrapper{height:100%;display:flex;align-items:center}.ui-input-search__panel{width:100%;height:fit-content;position:fixed;bottom:0;border:.0625em solid var(--grayscale-spacer-light);display:flex;flex-direction:column;animation:collapseAnimation ease-in-out .25s forwards}.ui-input-search__panel--expand{animation:expandAnimation ease-in-out .25s forwards}\n"] }]
        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }], propDecorators: { container: [{
                type: ViewChild,
                args: ['container', { static: true }]
            }], panel: [{
                type: ViewChild,
                args: ['panel', { static: false }]
            }], panelSuggestions: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], isShowSuggestions: [{
                type: Input
            }], outputWriteInput: [{
                type: Output
            }], outputSuggestions: [{
                type: Output
            }], onResize: [{
                type: HostListener,
                args: ['window:resize', ['$event']]
            }], onDocumentClick: [{
                type: HostListener,
                args: ['document:click', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtc2VhcmNoLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21hbmpvbi11aS9zcmMvbGliL2NvbXBvbmVudHMvaW5wdXQtc2VhcmNoL2lucHV0LXNlYXJjaC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9tYW5qb24tdWkvc3JjL2xpYi9jb21wb25lbnRzL2lucHV0LXNlYXJjaC9pbnB1dC1zZWFyY2guY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFxRCx1QkFBdUIsRUFBcUIsU0FBUyxFQUFlLFlBQVksRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFhLE1BQU0sRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMU8sT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sOENBQThDLENBQUM7QUFDbEYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRS9DLE9BQU8sRUFBd0IsTUFBTSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxNQUFNLENBQUM7OztBQUV4RSxpRUFBaUU7QUFjakUsTUFBTSxPQUFPLHNCQUFzQjtJQW1CakMsWUFDbUIsR0FBc0I7UUFBdEIsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFaaEMsc0JBQWlCLEdBQVksSUFBSSxDQUFDO1FBRWpDLHFCQUFnQixHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBQ3BFLHNCQUFpQixHQUFvRCxJQUFJLFlBQVksRUFBcUMsQ0FBQztRQUU5SCxjQUFTLEdBQVksS0FBSyxDQUFDO1FBQzNCLGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBQzdCLFVBQUssR0FBVyxFQUFFLENBQUM7UUFFbEIsa0JBQWEsR0FBa0IsSUFBSSxPQUFPLEVBQVEsQ0FBQztJQUl2RCxDQUFDO0lBSUwsUUFBUTtRQUNOLElBQ0Us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QUMsT0FBTyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtnQkFFNUIsZ0JBQWdCO3NCQUF4QixLQUFLO2dCQUVHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csaUJBQWlCO3NCQUF6QixLQUFLO2dCQUVJLGdCQUFnQjtzQkFBekIsTUFBTTtnQkFDRyxpQkFBaUI7c0JBQTFCLE1BQU07Z0JBY1AsUUFBUTtzQkFEUCxZQUFZO3VCQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsQ0FBQztnQkFlekMsZUFBZTtzQkFEZCxZQUFZO3VCQUFDLGdCQUFnQixFQUFFLENBQUMsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQgLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RMaXN0ZW5lciwgSW5wdXQsIE9uRGVzdHJveSwgT3V0cHV0LCBWaWV3Q2hpbGQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb2N1c0JsdXJEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9zaGFyZWQvZGlyZWN0aXZlcy9mb2N1cy1ibHVyLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSVVJT3B0aW9uR3JvdXBPcHRpb25Db25maWd1cmF0aW9uLCBVSU9wdGlvbkdyb3VwQ29tcG9uZW50IH0gZnJvbSAnLi4vb3B0aW9uLWdyb3VwL29wdGlvbi1ncm91cC5jb21wb25lbnQnO1xuaW1wb3J0IHsgZGlzdGluY3RVbnRpbENoYW5nZWQsIGZpbHRlciwgU3ViamVjdCwgdGFrZVVudGlsIH0gZnJvbSAncnhqcyc7XG5cbi8vIEHDsWFkaXIgTkd2YWx1ZV9BQ0NFU1NPUiB5IGFsIGNvbXBvbmVudGUgVUlPcHRpb25Hcm91cENvbXBvbmVudFxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd1aS1pbnB1dC1zZWFyY2gnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgRm9jdXNCbHVyRGlyZWN0aXZlLFxuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICB0ZW1wbGF0ZVVybDogJy4vaW5wdXQtc2VhcmNoLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmw6ICcuL2lucHV0LXNlYXJjaC5jb21wb25lbnQuc2NzcycsXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBVSUlucHV0U2VhcmNoQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcblxuICBAVmlld0NoaWxkKCdjb250YWluZXInLCB7IHN0YXRpYzogdHJ1ZSB9KSBjb250YWluZXIhOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdwYW5lbCcsIHsgc3RhdGljOiBmYWxzZSB9KSBwYW5lbCE6IEVsZW1lbnRSZWY7XG5cbiAgQElucHV0KCkgcGFuZWxTdWdnZXN0aW9ucyE6IFVJT3B0aW9uR3JvdXBDb21wb25lbnQgfCBudWxsO1xuXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyITogc3RyaW5nO1xuICBASW5wdXQoKSBpc1Nob3dTdWdnZXN0aW9uczogYm9vbGVhbiA9IHRydWU7XG5cbiAgQE91dHB1dCgpIG91dHB1dFdyaXRlSW5wdXQ6IEV2ZW50RW1pdHRlcjxzdHJpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIEBPdXRwdXQoKSBvdXRwdXRTdWdnZXN0aW9uczogRXZlbnRFbWl0dGVyPElVSU9wdGlvbkdyb3VwT3B0aW9uQ29uZmlndXJhdGlvbj4gPSBuZXcgRXZlbnRFbWl0dGVyPElVSU9wdGlvbkdyb3VwT3B0aW9uQ29uZmlndXJhdGlvbj4oKTsgXG5cbiAgcHVibGljIGlzRm9jdXNpbjogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgaXNTaG93UGFuZWw6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIHZhbHVlOiBzdHJpbmcgPSAnJztcblxuICBwcml2YXRlIF91bnN1YmNyaWJlcyQ6IFN1YmplY3Q8dm9pZD4gPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZlxuICApIHsgfVxuXG5cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScsIFsnJGV2ZW50J10pXG4gIG9uUmVzaXplKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29udGFpbmVyPy5uYXRpdmVFbGVtZW50ICYmXG4gICAgICB0aGlzLnBhbmVsPy5uYXRpdmVFbGVtZW50ICYmXG4gICAgICB0aGlzLmlzU2hvd1N1Z2dlc3Rpb25zXG4gICAgKSB7XG4gICAgICB0aGlzLmFkanVzdFBvc2l0aW9uUGFuZWwoXG4gICAgICAgIHRoaXMuY29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgIHRoaXMucGFuZWw/Lm5hdGl2ZUVsZW1lbnRcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6Y2xpY2snLCBbJyRldmVudCddKVxuICBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29udGFpbmVyPy5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgIGlmICh0aGlzLmlzU2hvd1N1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHRoaXMuaXNTaG93UGFuZWwgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pc0ZvY3VzaW4gPSBmYWxzZTtcbiAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICBpZih0aGlzLnBhbmVsU3VnZ2VzdGlvbnMpIHtcbiAgICAgIHRoaXMucGFuZWxTdWdnZXN0aW9ucy5vdXRwdXRTZWxlY3RlZFxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpbHRlcigodmFsdWUpID0+IHZhbHVlICE9PSB1bmRlZmluZWQpLFxuICAgICAgICAvL2Rpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLl91bnN1YmNyaWJlcyQpXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKChvcHRpb25zOiBJVUlPcHRpb25Hcm91cE9wdGlvbkNvbmZpZ3VyYXRpb24pID0+IHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG9wdGlvbnM/LnZhbHVlO1xuICAgICAgICB0aGlzLmlzRm9jdXNpbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU2hvd1BhbmVsID0gZmFsc2U7XG4gICAgICAgIHRoaXMub3V0cHV0U3VnZ2VzdGlvbnMuZW1pdChvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbnRhaW5lcj8ubmF0aXZlRWxlbWVudCAmJlxuICAgICAgdGhpcy5wYW5lbD8ubmF0aXZlRWxlbWVudCAmJlxuICAgICAgdGhpcy5pc1Nob3dTdWdnZXN0aW9uc1xuICAgICkge1xuICAgICAgdGhpcy5hZGp1c3RQb3NpdGlvblBhbmVsKFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5uYXRpdmVFbGVtZW50LFxuICAgICAgICB0aGlzLnBhbmVsPy5uYXRpdmVFbGVtZW50XG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbnRhaW5lcj8ubmF0aXZlRWxlbWVudCAmJlxuICAgICAgdGhpcy5wYW5lbD8ubmF0aXZlRWxlbWVudCAmJlxuICAgICAgdGhpcy5pc1Nob3dTdWdnZXN0aW9uc1xuICAgICkge1xuICAgICAgdGhpcy5hZGp1c3RQb3NpdGlvblBhbmVsKFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5uYXRpdmVFbGVtZW50LFxuICAgICAgICB0aGlzLnBhbmVsPy5uYXRpdmVFbGVtZW50XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuX3Vuc3ViY3JpYmVzJC5uZXh0KCk7XG4gICAgdGhpcy5fdW5zdWJjcmliZXMkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBwdWJsaWMgb25JbnB1dChldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCB7IHZhbHVlIH0gPSAoZXZlbnQuY3VycmVudFRhcmdldCkgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLm91dHB1dFdyaXRlSW5wdXQuZW1pdCh0aGlzLnZhbHVlKTtcblxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuXG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cygpIHtcbiAgICB0aGlzLmlzRm9jdXNpbiA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKCkge1xuICAgIHRoaXMuaXNGb2N1c2luID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGFkanVzdFBvc2l0aW9uUGFuZWwoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFuZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKCFjb250YWluZXIgfHwgIXBhbmVsKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NvbnRhaW5lciBvciBwYW5lbCBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyB3aWR0aCwgdG9wLCBsZWZ0LCBoZWlnaHQgfSA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIHBhbmVsLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICBwYW5lbC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgICBwYW5lbC5zdHlsZS50b3AgPSBgJHt0b3AgKyBoZWlnaHR9cHhgO1xuICAgIHBhbmVsLnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcblxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbn1cbiIsIjxkaXYgXG4gICAgI2NvbnRhaW5lciBcbiAgICBjbGFzcz1cInVpLWlucHV0LXNlYXJjaFwiIFxuICAgIFtjbGFzcy51aS1pbnB1dC1zZWFyY2gtLWV4cGFuZF09XCIoaXNTaG93U3VnZ2VzdGlvbnMgJiYgdmFsdWUubGVuZ3RoICE9PSAwKSAmJiAoaXNTaG93UGFuZWwgfHwgaXNGb2N1c2luKVwiPlxuICAgIDxpbnB1dCBcbiAgICAgICAgI2lucHV0IFxuICAgICAgICBmb2N1c0JsdXJcbiAgICAgICAgW3ZhbHVlXT1cInZhbHVlXCJcbiAgICAgICAgKGlucHV0KT1cIm9uSW5wdXQoJGV2ZW50KVwiXG4gICAgICAgIChvbkZvY3VzKT1cIm9uRm9jdXMoKVwiXG4gICAgICAgIChvbkJsdXIpPVwib25CbHVyKClcIiBcbiAgICAgICAgdHlwZT1cInNlYXJjaFwiXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiQnVzY2FyIG1vZGVsb3NcIlxuICAgIC8+XG4gICAgPGRpdiBjbGFzcz1cInVpLWlucHV0LXNlYXJjaF9fd3JhcHBlclwiPlxuICAgICAgICA8c3ZnIGNsYXNzPVwidWktaW5wdXQtc2VhcmNoLWljb25cIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEwLjg0MjQgMTcuNjg0QzEyLjM2MDUgMTcuNjgzNyAxMy44MzQ5IDE3LjE3NTUgMTUuMDMwNyAxNi4yNDAzTDE4Ljc5MDYgMjBMMjAgMTguNzkwN0wxNi4yNDAxIDE1LjAzMUMxNy4xNzU4IDEzLjgzNTEgMTcuNjg0NCAxMi4zNjA0IDE3LjY4NDcgMTAuODQyQzE3LjY4NDcgNy4wNjk0OSAxNC42MTUxIDQgMTAuODQyNCA0QzcuMDY5NjUgNCA0IDcuMDY5NDkgNCAxMC44NDJDNCAxNC42MTQ1IDcuMDY5NjUgMTcuNjg0IDEwLjg0MjQgMTcuNjg0Wk0xMC44NDI0IDUuNzEwNUMxMy42NzI1IDUuNzEwNSAxNS45NzQxIDguMDExOTcgMTUuOTc0MSAxMC44NDJDMTUuOTc0MSAxMy42NzIgMTMuNjcyNSAxNS45NzM1IDEwLjg0MjQgMTUuOTczNUM4LjAxMjE5IDE1Ljk3MzUgNS43MTA1OSAxMy42NzIgNS43MTA1OSAxMC44NDJDNS43MTA1OSA4LjAxMTk3IDguMDEyMTkgNS43MTA1IDEwLjg0MjQgNS43MTA1WlwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIi8+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEyLjA1IDkuNjMyN0MxMi4zNzQyIDkuOTU3NjkgMTIuNTUyOSAxMC4zODcgMTIuNTUyOSAxMC44NDJIMTQuMjYzNUMxNC4yNjQzIDEwLjM5MjUgMTQuMTc1OSA5Ljk0NzM0IDE0LjAwMzYgOS41MzIxOUMxMy44MzEyIDkuMTE3MDUgMTMuNTc4MyA4Ljc0MDE4IDEzLjI1OTQgOC40MjMzN0MxMS45NjQ1IDcuMTMwMjQgOS43MTkzNSA3LjEzMDI0IDguNDI1MjkgOC40MjMzN0w5LjYzMjk3IDkuNjM0NDFDMTAuMjgzIDguOTg2MTMgMTEuNDAzNCA4Ljk4Nzg0IDEyLjA1IDkuNjMyN1pcIiBmaWxsPVwiY3VycmVudENvbG9yXCIvPlxuICAgICAgICA8L3N2Zz5cbiAgICA8L2Rpdj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiaXNTaG93U3VnZ2VzdGlvbnNcIj5cbiAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICNwYW5lbCBcbiAgICAgICAgICAgIGNsYXNzPVwidWktaW5wdXQtc2VhcmNoX19wYW5lbFwiIFxuICAgICAgICAgICAgW2NsYXNzLnVpLWlucHV0LXNlYXJjaF9fcGFuZWwtLWV4cGFuZF09XCJ2YWx1ZS5sZW5ndGggIT09IDAgJiYgKGlzU2hvd1BhbmVsIHx8IGlzRm9jdXNpbilcIiBcbiAgICAgICAgICAgIHJvbGU9XCJsaXN0Ym94XCI+XG4gICAgICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuPC9kaXY+ICAiXX0=